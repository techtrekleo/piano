# 音乐可视化器 - See Music

这是一个基于Python的音乐可视化程序，可以分析音频文件并生成动态的音乐可视化效果，类似于图片中展示的"See Music"效果。

## 功能特点

### 🎵 音频分析
- 支持多种音频格式：MP3, WAV, FLAC, M4A
- 自动分析音频的节拍、调性、时长等特征
- 实时频谱分析和MFCC特征提取

### 🎨 可视化效果
- **落下的音符模式**：音符从顶部落下到钢琴键盘
- **频谱模式**：实时显示音频频谱
- **波形模式**：显示音频波形
- **钢琴卷模式**：钢琴卷样式的音符显示

### 🎨 颜色方案
- **彩虹模式**：随时间变化的彩虹色彩
- **频率模式**：根据音符频率映射颜色
- **情绪模式**：根据MFCC特征映射颜色

### 🎹 钢琴键盘
- 88键标准钢琴键盘显示
- 白键和黑键的准确表示
- 音符与键盘的对应关系

## 安装要求

### 系统要求
- Python 3.7 或更高版本
- macOS, Windows, 或 Linux

### 依赖库
```bash
pip install -r requirements.txt
```

主要依赖：
- `librosa` - 音频分析
- `pygame` - 音频播放
- `matplotlib` - 可视化
- `numpy` - 数值计算
- `scipy` - 科学计算

## 使用方法

### 1. 运行程序
```bash
# 基础版本
python music_visualizer.py

# 高级版本（推荐）
python advanced_visualizer.py
```

### 2. 操作步骤
1. 点击"上传音乐文件"选择音频文件
2. 等待音频分析完成
3. 选择可视化模式和颜色方案
4. 点击"播放"开始音乐可视化
5. 使用"暂停"和"停止"控制播放

### 3. 可视化模式说明

#### 落下的音符模式（默认）
- 音符从屏幕顶部落下到钢琴键盘
- 节拍音符显示为星形，普通音符为圆形
- 音符颜色根据选择的颜色方案变化

#### 频谱模式
- 实时显示音频的色度图
- 每个音符对应一个频谱条
- 高度表示音符强度

#### 波形模式
- 显示当前播放位置的音频波形
- 实时更新波形显示

#### 钢琴卷模式
- 类似MIDI钢琴卷的显示方式
- 音符强度用透明度表示

## 文件结构

```
TACOGOLD/
├── music_visualizer.py      # 基础版本
├── advanced_visualizer.py   # 高级版本（推荐）
├── requirements.txt         # 依赖库列表
└── README.md               # 说明文档
```

## 技术特点

### 音频处理
- 使用librosa进行专业的音频分析
- 实时节拍检测和调性识别
- 色度图和MFCC特征提取

### 可视化引擎
- 基于matplotlib的高性能绘图
- 30FPS的流畅动画效果
- 多种可视化模式的实时切换

### 用户界面
- 基于tkinter的现代化GUI
- 直观的控制面板
- 实时音频信息显示

## 故障排除

### 常见问题

1. **音频无法播放**
   - 检查音频文件格式是否支持
   - 确保pygame正确安装

2. **可视化效果卡顿**
   - 降低音频文件质量
   - 关闭其他占用CPU的程序

3. **依赖库安装失败**
   - 使用conda替代pip
   - 更新Python版本

### 性能优化建议
- 使用WAV格式获得最佳性能
- 避免过长的音频文件
- 在性能较好的设备上运行

## 开发说明

### 代码结构
- `MusicVisualizer` / `AdvancedMusicVisualizer`：主类
- `setup_ui()`：用户界面设置
- `analyze_audio()`：音频分析
- `update_visualization()`：可视化更新

### 扩展功能
可以轻松添加新的可视化模式：
1. 在`visualization_mode`中添加新模式
2. 实现对应的`update_*_visualization()`方法
3. 在UI中添加模式选择

## 许可证

本项目仅供学习和个人使用。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

**享受音乐可视化的乐趣！** 🎵✨
